# CodePilot 사용 매뉴얼

## 개요

CodePilot은 VSCode 기반의 AI 코드 어시스턴트 플러그인으로, LLM(Large Language Model)을 활용하여 코드 생성, 수정, 분석 및 실시간 정보 제공을 지원합니다.

## 주요 기능

### 🤖 AI 기반 코드 어시스턴스
- **멀티모델 AI 지원**: Gemini 2.5 Pro Flash, Ollama Gemma3:27b
- **듀얼 모드 인터페이스**: CODE 탭(코드 작업), ASK 탭(일반 질의)
- **맥락 인식 응답**: 프로젝트 구조와 기존 코드 분석
- **자연어 처리**: 복잡한 요청도 자연어로 이해

### 📁 고급 파일 관리
- **스마트 파일 선택**: @ 버튼으로 특정 파일 선택
- **지속적 파일 컨텍스트**: 선택한 파일이 대화에서 유지
- **다중 파일 작업**: 여러 파일 동시 생성/수정/삭제
- **자동 파일 업데이트**: AI 제안에 따른 자동 파일 작업

### 🌐 실시간 정보 서비스
- **날씨 정보**: 기상청 API 연동
- **뉴스 업데이트**: NewsAPI 연동
- **주식 시장 데이터**: Alpha Vantage API 연동

## 설치 및 설정

### 1. VSCode 확장 설치
1. 동봉된 codepilot-2.5.0.vsix 를 vscode 확장 메뉴에서 수동으로 설치

### 2. 설정 패널 열기
1. VSCode 명령 팔레트 열기 (`Ctrl+Shift+P` / `Cmd+Shift+P`)
2. "CodePilot: Open Settings Panel" 실행
3. 설정 패널이 새 탭에서 열림

### 3. 언어 설정
- 설정 패널 상단의 언어 드롭다운에서 원하는 언어 선택
- 지원 언어: 한국어, 영어, 일본어, 독일어, 스페인어, 프랑스어, 중국어
- "언어 저장" 버튼 클릭하여 설정 저장

### 4. Banya 라이센스 설정
**중요**: CodePilot의 고급 기능 사용을 위해 Banya 라이센스가 필요합니다.
- 동봉된 16자리 시리얼 번호를 입력

#### 라이센스 설정 단계:
1. **라이센스 시리얼 입력**: 하이픈을 포함한 16자리 시리얼 번호 입력
2. **라이센스 검증**: "검증" 버튼 클릭하여 라이센스 유효성 확인
3. **라이센스 저장**: 검증 완료 후 "라이센스 저장" 버튼 클릭
4. **라이센스 관리**: 필요시 "라이센스 삭제" 버튼으로 기존 라이센스 제거


### 5. AI 모델 설정

#### AI 모델 선택:
설정 패널에서 사용할 AI 모델을 선택할 수 있습니다:
- **Gemini 2.5 Pro Flash**: Google의 클라우드 기반 AI 모델 (기본값)
- **Gemma3:27b (Ollama)**: 로컬 네트워크의 Ollama 서버 기반 AI 모델

#### Gemini 설정:
1. AI 모델 선택에서 "Gemini 2.5 Pro Flash" 선택
2. [Google AI Studio](https://aistudio.google.com/app/apikey)에서 API 키 발급
3. Gemini API 키 입력 필드에 키 입력
4. "저장" 버튼 클릭

#### Ollama 설정:
1. AI 모델 선택에서 "Gemma3:27b (Ollama)" 선택
2. Ollama API URL 입력 (기본값: http://localhost:11434)
3. API 엔드포인트 선택:
   - **로컬 Ollama 서버**: `/api/generate` 선택
   - **외부 Ollama 서버**: `/api/chat` 선택
4. 각각 "저장" 버튼 클릭

**엔드포인트 설정 가이드:**
- **로컬 Ollama**: `http://localhost:11434` + `/api/generate`
- **외부 서버**: `https://your-server.com` + `/api/chat`
- **Vessl AI 클러스터**: `https://model-service-gateway-xxx.eu.h100-cluster.vessl.ai` + `/api/chat`

#### 모델별 설정 동작:
- 모델 선택에 따라 관련 설정 섹션이 자동으로 활성화/비활성화
- Gemini 선택 시: Gemini API 키 설정만 활성화
- Ollama 선택 시: Ollama API URL 설정만 활성화

### 6. 외부 API 설정 (선택사항)
실시간 정보 기능 사용을 위한 외부 API 키들을 설정할 수 있습니다:

#### 날씨 API (기상청):
1. [기상청 API Hub](https://apihub.kma.go.kr/)에서 회원가입
2. API 키 발급
3. 설정 패널의 "기상청 API 키" 필드에 입력
4. "저장" 버튼 클릭

#### 뉴스 API (네이버):
1. [네이버 개발자센터](https://developers.naver.com/apps/#/list)에서 애플리케이션 등록
2. Client ID와 Client Secret 발급
3. 설정 패널의 "네이버 뉴스 API" 섹션에 입력
4. 각각 "저장" 버튼 클릭

#### 주식 API (Alpha Vantage):
1. [Alpha Vantage](https://www.alphavantage.co/support/#api-key)에서 무료 API 키 발급
2. 설정 패널의 "주식 API 키" 필드에 입력
3. "저장" 버튼 클릭

## 사용법

### CODE 탭 사용법

#### 1. CODE 탭 열기
- VSCode 활동 표시줄에서 CodePilot 아이콘 클릭
- 또는 명령 팔레트에서 "CodePilot: Open CODE Panel" 실행
- CODE 탭이 전용 패널에서 열림

#### 2. 기본 코드 생성
```
"React 사용자 인증 컴포넌트 생성해줘"
"간단한 Todo 앱 만들어줘"
"TypeScript로 API 클라이언트 클래스 생성해줘"
```

#### 3. 코드 수정
```
"이 함수에 에러 핸들링 추가해줘"
"이 컴포넌트를 함수형으로 변경해줘"
"이 코드에 주석을 추가해줘"
```

#### 4. 파일 컨텍스트 활용
1. @ 버튼 클릭하여 특정 파일 선택
2. 선택한 파일이 흰색 테두리 태그로 표시
3. 선택한 파일의 내용이 AI 응답에 컨텍스트로 포함
4. 선택한 파일은 대화 세션 동안 유지됨

#### 5. 다중 파일 작업
```
"src/components 폴더에 새로운 컴포넌트들을 생성해줘"
"기존 파일들을 TypeScript로 변환해줘"
"테스트 파일들을 생성해줘"
```

### ASK 탭 사용법

#### 1. ASK 탭 열기
- VSCode 활동 표시줄에서 CodePilot 아이콘 클릭
- CODE 탭 옆의 ASK 탭 클릭
- 또는 명령 팔레트에서 "CodePilot: Open ASK Panel" 실행

#### 2. 일반 질의응답
```
"TypeScript란 무엇인가요?"
"React Hooks의 장점은 무엇인가요?"
"비동기 프로그래밍의 패턴을 설명해줘"
```

#### 3. 실시간 정보 조회
```
"서울 날씨 알려줘"
"최신 IT 뉴스 보여줘"
"현재 주요 주식 시세 알려줘"
```

#### 4. 코드 분석
```
"이 코드의 문제점을 분석해줘"
"성능 최적화 방법을 제안해줘"
"보안 취약점을 찾아줘"
```

#### 5. 개발 문서 작성
```
"React 컴포넌트의 README.md 파일을 작성해줘"
"이 API의 사용법을 마크다운으로 문서화해줘"
"프로젝트의 설치 가이드와 사용법을 작성해줘"
"이 함수의 JSDoc 주석을 작성해줘"
"데이터베이스 스키마 문서를 작성해줘"
"이 Spring Controller에 대한 JUnit 테스트 코드를 작성해줘"
```

### 이미지 분석 기능

#### 1. 이미지 업로드
- 클립보드에서 이미지 붙여넣기 (`Ctrl+V` / `Cmd+V`)
- 드래그 앤 드롭으로 이미지 첨부

#### 2. 이미지 기반 질의
```
"이 다이어그램을 설명해줘"
"이 코드의 오류를 찾아줘"
"이 UI를 개선해줘"
```

## 설정 관리

### 1. 프로젝트 설정
- **프로젝트 루트**: 코드 컨텍스트를 위한 루트 경로 설정
  - "경로 선택" 버튼으로 프로젝트 최상위 디렉토리 지정
  - 파일 경로 참조 시 기준점으로 사용
- **소스 경로**: 코드 맥락 포함을 위한 경로 지정
  - "경로 추가" 버튼으로 특정 폴더나 파일 경로 추가
  - AI 응답 생성 시 참조할 소스 코드 경로 목록
- **자동 업데이트**: AI 제안에 따른 자동 파일 작업 on/off
  - 토글 스위치로 활성화/비활성화
  - 비활성화 시 업데이트 전 확인 메시지 표시

### 2. 언어 설정
- **지원 언어**: 한국어, 영어, 일본어, 독일어, 스페인어, 프랑스어, 중국어
- **언어 전환**: 드롭다운에서 언어 선택 후 "언어 저장" 버튼 클릭
- **언어 저장**: 언어 선호도 영구 저장, UI 즉시 반영

### 3. AI 모델 설정
- **모델 선택**: Gemini 2.5 Pro Flash / Ollama Gemma3:27b
- **동적 설정**: 모델 선택에 따른 자동 설정 활성화/비활성화
- **Ollama API URL**: 기본값 http://localhost:11434

### 4. API 키 관리
- **Gemini API 키**: Google AI Studio에서 획득
- **날씨 API 키**: 기상청 API Hub에서 획득
- **뉴스 API**: 네이버 개발자센터에서 Client ID & Secret 획득
- **주식 API 키**: Alpha Vantage에서 획득

## 고급 기능

### 1. 파일 작업 추적
- 📁 파일 업데이트 결과 표시
- 📋 AI 작업 요약 제공
- 💡 작업 실행 설명 포함

### 2. 코드 블록 관리
- 언어 감지 및 구문 강조
- 원클릭 코드 복사 기능
- Diff 보기로 변경사항 비교

### 3. 자동 Bash 명령어 실행 🚀
CodePilot은 LLM 응답에서 bash 명령어를 자동으로 감지하고 VSCode 터미널에서 실행합니다.

#### 기능 특징:
- **자동 명령어 감지**: ```bash 코드 블록을 자동으로 인식
- **터미널 통합**: VSCode 통합 터미널에서 명령어 실행
- **다중 명령어 지원**: 여러 명령어를 순차적으로 처리
- **실시간 알림**: 실행된 명령어 목록과 결과 표시
- **오류 처리**: 명령어 실행 실패 시 상세한 오류 메시지

#### 사용 예시:

**프로젝트 설치 및 실행:**
```
사용자: "프로젝트를 설치하고 실행해줘"

AI 응답:
프로젝트를 설치하고 실행하는 방법입니다:

```bash
npm install
npm run build
npm start
```

이 명령어들을 실행하면 프로젝트가 시작됩니다.
```

**의존성 업데이트:**
```
사용자: "의존성을 업데이트하고 빌드해줘"

AI 응답:
의존성을 업데이트하고 프로젝트를 빌드하겠습니다:

```bash
npm update
npm audit fix
npm run build
```

업데이트가 완료되었습니다.
```

**새로운 패키지 설치:**
```
사용자: "React Router를 설치하고 설정해줘"

AI 응답:
React Router를 설치하고 기본 설정을 추가하겠습니다:

```bash
npm install react-router-dom
```

설치가 완료되었습니다. 이제 라우터 설정을 추가하겠습니다.
```

#### 실행 결과:
CodePilot이 자동으로 다음을 수행합니다:
1. **명령어 감지**: ```bash 블록에서 명령어 추출
2. **터미널 활성화**: CodePilot 전용 터미널 표시
3. **명령어 실행**: 각 명령어를 순차적으로 실행
4. **결과 알림**: 채팅창에 "🚀 Bash 명령어 실행됨: • npm install • npm run build • npm start" 메시지 표시

#### 주의사항:
- **보안**: 실행할 명령어를 신중히 검토하세요
- **권한**: 일부 명령어는 관리자 권한이 필요할 수 있습니다
- **환경**: 프로젝트 디렉토리에서 명령어가 실행됩니다
- **취소**: 명령어 실행 중에는 AI 요청을 취소할 수 없습니다

### 4. 보안 기능
- VS Code SecretStorage로 API 키 안전 저장
- AES-256-CBC 암호화로 라이센스 보호
- 로컬 코드 분석으로 개인정보 보호

### 5. 성능 최적화
- 스마트 맥락 길이 관리
- 바이너리/비코드 파일 자동 제외
- 대용량 코드베이스 효율적 처리

## 문제 해결

### 1. 일반적인 문제

#### AI 응답이 느린 경우
- 네트워크 연결 상태 확인
- API 키 유효성 검사
- Ollama 서버 상태 확인 (로컬 모델 사용 시)

#### 파일 작업이 실패하는 경우
- 프로젝트 루트 경로 설정 확인
- 파일 권한 확인
- 자동 업데이트 설정 확인

#### API 키 오류
- API 키 유효성 확인
- 설정에서 API 키 재입력
- 외부 API 서비스 상태 확인

### 2. 디버깅

#### 디버그 로깅 활성화
```json
// VS Code settings.json에 추가
{
  "codepilot.debug": true
}
```

#### 확장 로그 확인
1. VS Code에서 `도움말 > 개발자 도구 토글` 선택
2. 콘솔 탭에서 CodePilot 관련 로그 확인

### 3. 성능 최적화

#### 대용량 프로젝트 처리
- 불필요한 파일 제외 설정
- 컨텍스트 길이 조정
- 메모리 사용량 모니터링

#### 네트워크 최적화
- 로컬 Ollama 서버 사용 (오프라인 작업)
- API 호출 빈도 조절
- 캐싱 활용

## 사용 팁

### 1. 효과적인 프롬프트 작성
- 구체적이고 명확한 요청 작성
- 원하는 결과물의 형태 명시
- 컨텍스트 정보 충분히 제공

### 2. 파일 컨텍스트 활용
- 관련 파일들을 미리 선택하여 컨텍스트 제공
- 프로젝트 구조를 이해할 수 있도록 주요 파일 포함
- 지속적으로 사용할 파일들은 유지

### 3. 실시간 정보 활용
- 날씨, 뉴스, 주식 정보를 자연어로 질의
- 특정 주제나 지역에 대한 정보 요청
- 최신 정보 업데이트 확인

### 4. 코드 품질 향상
- AI 제안 코드 검토 후 적용
- 테스트 코드 생성 요청
- 코드 리팩토링 및 최적화 요청

### 5. Bash 명령어 실행 활용
- **프로젝트 설정**: "프로젝트를 설치하고 실행해줘" 같은 요청으로 자동 설정
- **의존성 관리**: "의존성을 업데이트해줘" 요청으로 패키지 관리 자동화
- **개발 환경**: "개발 서버를 시작해줘" 요청으로 개발 환경 자동 구성
- **배포 준비**: "배포용 빌드를 생성해줘" 요청으로 배포 준비 자동화
- **명령어 검토**: 실행될 명령어를 미리 확인하고 안전성 검토

## 라이센스 관리

### 1. Banya 라이센스 시스템
- **필수 라이센스**: CODE 및 ASK 탭 사용을 위한 Banya 라이센스 필요
- **라이센스 형식**: 하이픈을 포함한 16자리 시리얼 번호
- **검증 시스템**: Banya.ai 클라우드 서버 기반 실시간 라이센스 검증(설치 후 최초 1회 검증)

### 2. 라이센스 설정 과정
1. **라이센스 시리얼 입력**: 설정 패널의 라이센스 입력 필드에 시리얼 번호 입력
2. **라이센스 검증**: "검증" 버튼 클릭하여 라이센스 유효성 확인
3. **라이센스 저장**: 검증 완료 후 "라이센스 저장" 버튼 클릭
4. **라이센스 관리**: 필요시 "라이센스 삭제" 버튼으로 기존 라이센스 제거

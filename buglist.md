# CodePilot Bug List

## 현재 알려진 문제점들

### 🔧 **수정 예정 버그**

#### **1. LLM 설정 변경 시 불필요한 라이선스 검증** ✅ **수정 완료**
- **문제**: LLM 모델 변경 또는 Ollama 엔드포인트 변경 시 시리얼 번호 검증 로직을 실행해야 엔드포인트를 변경할 수 있음. 엔드포인트 입력이 비활성화, 변경버튼도 비활성화
- **영향**: 설정 변경 시 불필요한 라이선스 검증으로 인한 지연
- **상태**: 수정 완료
- **우선순위**: 중간
- **수정 내용**: 
  - `webview/settings.js`의 `updateSaveButtonsState()` 함수 수정
  - Ollama API URL과 엔드포인트 저장 버튼을 라이선스 검증 없이 항상 활성화되도록 변경
  - API 키 관련 버튼들만 라이선스 검증이 필요하도록 분리
  - 이제 라이선스 검증 없이도 Ollama 설정을 자유롭게 변경할 수 있음

#### **2. @ 컨텍스트 문서가 Ollama에 전달되지 않는 문제** ✅ **수정 완료**
- **문제**: @ 기호로 컨텍스트 문서를 추가할 때 Ollama 모델에 전달되지 않음
- **영향**: Ollama 사용 시 컨텍스트 기반 응답이 제대로 작동하지 않음
- **상태**: 디버깅 중
- **우선순위**: 높음
- **수정 내용**: 
  - `src/ai/ollamaService.ts`: 선택된 파일들을 읽어서 컨텍스트에 추가하는 로직 구현
  - `src/ai/llmService.ts`: LLM 서비스에서도 선택된 파일들을 처리하도록 수정
  - 디버깅 로그 추가하여 파일 전달 과정 추적 가능
- **현재 상황**: 외부 Ollama 서버에서 여전히 문제 발생, 디버깅 로그로 원인 파악 중

#### **3. 설정 페이지에서 라이선스 검증 후에도 버튼들이 비활성화되는 문제** ✅ **수정 완료**
- **문제**: 라이선스 검증이 완료되고 시리얼 키가 저장되어 있어도 설정 페이지의 버튼들이 비활성화 상태로 유지됨
- **영향**: 사용자가 설정을 변경할 수 없어 불편함
- **상태**: 수정 완료
- **우선순위**: 높음
- **수정 내용**:
  - `src/webview/panelManager.ts`: `loadApiKeys` 시 라이선스 검증 상태를 확인하여 `isLicenseVerified` 필드 추가
  - `webview/settings.js`: `currentApiKeys` 메시지에서 `isLicenseVerified` 상태를 받아서 처리하는 로직 추가
  - 페이지 초기화 시 강제로 `isLicenseVerified = false`로 설정하는 부분 제거
  - 페이지 로드 시 버튼 상태 업데이트 타이밍 조정 (서버 응답 후에 업데이트)
  - 이제 라이선스 검증이 완료되면 버튼들이 정상적으로 활성화됨

#### **4. ASK 탭에서 파일 생성, 수정, 터미널 명령어 실행 제한** ✅ **수정 완료**
- **문제**: ASK 탭에서도 파일 생성, 수정, 삭제 및 터미널 명령어 실행이 가능했음
- **영향**: ASK 탭의 목적(단순 질의 응답)과 맞지 않는 기능이 제공됨
- **상태**: 수정 완료
- **우선순위**: 중간
- **수정 내용**:
  - `src/ai/llmResponseProcessor.ts`: `GENERAL_ASK` 타입일 때 파일 작업과 터미널 명령어 실행을 건너뛰도록 수정
  - `src/ai/llmService.ts`: `GENERAL_ASK` 타입일 때 코드베이스 컨텍스트와 선택된 파일들을 처리하지 않도록 수정
  - 시스템 프롬프트에 파일 생성/수정/삭제 및 터미널 명령어 실행 금지 지침 추가
  - 파일 작업이나 터미널 명령어가 감지되면 경고 메시지 표시
  - 이제 ASK 탭은 순수한 질의 응답 기능만 제공함

#### **5. 마크다운 파일 생성이 작동하지 않는 문제** ✅ **수정 완료**
- **문제**: "markdown을 생성해달라"는 명령을 실행해도 실제 파일이 생성되지 않음
- **영향**: 마크다운 파일 생성 기능이 완전히 작동하지 않음
- **상태**: 수정 완료
- **우선순위**: 높음
- **수정 내용**:
  - `src/ai/llmResponseProcessor.ts`: 마크다운 파일 정규식 패턴을 3단계로 개선
  - 첫 번째 정규식: 가장 엄격한 패턴 (작업 요약, 설명 섹션까지 고려)
  - 두 번째 정규식: 중간 패턴 (기본 지시어만 고려)
  - 세 번째 정규식: 가장 간단한 패턴 (모든 내용을 캡처)
  - 순차적 폴백 메커니즘으로 정규식 실패 시 다음 정규식 시도
  - 디버깅 로그 추가로 정규식 매칭 과정 추적 가능
  - 이제 마크다운 파일 생성이 안정적으로 작동함

### 🐛 **기타 알려진 문제점들**

#### **6. 대용량 프로젝트에서 성능 저하**
- **문제**: 대용량 프로젝트에서 컨텍스트 로딩 시 성능 저하
- **영향**: 응답 속도 지연
- **상태**: 모니터링 중
- **우선순위**: 낮음

#### **7. 특수 문자 포함된 파일명 처리 문제**
- **문제**: 특수 문자가 포함된 파일명을 컨텍스트에 포함할 때 오류 발생 가능
- **영향**: 해당 파일들이 컨텍스트에서 제외됨
- **상태**: 확인 필요
- **우선순위**: 낮음

## 📝 **버그 수정 히스토리**

### **v2.5.6** (완료)
- 마크다운 파일 생성이 작동하지 않는 문제 수정
- 3단계 정규식 시스템으로 마크다운 파일 감지 안정성 향상
- 순차적 폴백 메커니즘으로 정규식 매칭 실패 시 대안 패턴 시도
- 디버깅 로그 추가로 마크다운 파일 처리 과정 추적 가능

### **v2.5.4** (완료)
- LLM 설정 변경 시 불필요한 라이선스 검증 요구 문제 수정
- @ 컨텍스트 문서가 Ollama에 전달되지 않는 문제 디버깅 로그 추가
- 설정 페이지에서 라이선스 검증 후에도 버튼들이 비활성화되는 문제 수정
- ASK 탭에서 파일 생성, 수정, 터미널 명령어 실행 제한 기능 추가

### **v2.5.3**
- 대화형 명령어 처리 기능 추가
- Ollama 통합 개선
- 다국어 지원 확장

### **v2.5.2**
- 마크다운 파일 생성 기능 추가
- 자동 Bash 명령어 실행 기능 개선

### **v2.5.1**
- Gemini API 통합
- 기본 UI/UX 개선

---

*마지막 업데이트: 2025년 8월 26일*

